<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>P√°gina Pr√≥ximamente</title>
	<!-- <link rel="stylesheet" href="./style.css"> -->
	<link rel="icon" href="./public/bakana(1).png">
	<link rel="stylesheet" href="./style.css">
	<link rel="stylesheet" href="./output.css">
</head>

<body class="overflow-hidden">


	<div class="
  grid 
  grid-cols-1 
  grid-rows-[1fr_3fr_1fr_1fr]
  gap-4
  items-center 
  h-dvh
  bg-black 
  text-center 
  place-items-center
  bg-black
  bg-no-repeat 
  w-full 
  bg-transparent
  relative
  full-screen-height-lg">

		<div class="absolute z-10 
  top-1/2 
  .-translate-y-50 hidden" id="modal-danger-window" aria-labelledby="modal-title"  role="dialog" aria-modal="true">
			<div class="fixed inset-0 transition-opacity modal-backdrop">

			<div class="fixed inset-0 z-10 w-screen">
				<div class="flex min-h-full items-start justify-center p-4 text-center sm:items-center sm:p-0">
					<div
						class="relative transform overflow-hidden rounded-lg bg-white text-center transition-all sm:my-8 sm:w-full sm:max-w-lg">
						<div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
							<div class="sm:flex sm:items-center">
								<div
									id="svg-modal-container"
									class="mx-auto modal-container flex size-12 shrink-0 items-center justify-center rounded-full bg-red-100 text-red-600 sm:mx-0 sm:size-10">
									
								</div>
								<div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
									<h3 class="text-base font-semibold text-gray-900" id="modal-title">Algo sali&oacute;
										mal</h3>
									<div class="mt-2">
										<p class="text-sm text-gray-500" id="modal-text">Porfavor, intente de nuevo
											m&aacute;s tarde</p>
									</div>
								</div>
							</div>
						</div>
						<div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
							<button type="button"
								class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto"
								onclick=removeWindow()>Cancel</button>
						</div>
					</div>
				</div>
				</div>
			</div>
		</div>


		<form id="emailForm" class="
        left-1/2
        top-1/2 
        .-translate-y-50
        w-90 
		sm:w-150
		lg:w-200
		xl:w-250
		2xl:w-300
        h-screen 
        opacity-0
        absolute
        bg-no-repeat 
        bg-center 
        bg-contain
		gap-2
		lg:gap-4
		2xl:gap-6
        " style="background-image: url('./public/nube.png')">
			
			<label for="email" class="block text-black text-lg sm:text-2xl 2xl:text-3xl font-medium email-label">Email:</label>
			<input type="email" id="email" name="email" required
				class="px-4 py-2 w-50 sm:w-80 lg:w-100 h-6 lg:py-4 border border-gray-300 rounded-md text-black-500 border-indigo-500
				focus:border-indigo-500/50 focus:outline" style="color: black;">
			<button type="submit"  
			class="px-4 py-2 lg:px-8 lg:py-4 bg-white xl:text-xl text-base font-medium lg:py-4 lg:text-xl rounded-full hover:cursor-pointer shadow-sm hover:shadow-md transition-all"
				style="color: black;">Notificar</button>
		</form>

		<!-- Title and Subtitle -->


		<h2 class="w-60 
		text-[16px]
		sm:text-[24px]
		sm:w-80
		lg:text-[28px]
		lg:w-100
		xl:text-[26px]
		2xl:w-140
		2xl:text-[32px]
		">NUESTRA WEB ESTAR√Å DISPONIBLE MUY PRONTO</h2>
		<h1 class="text-[40px] sm:text-[60px] 
		sm:text-[90px]
		lg:text-[100px]
		xl:text-[110px]
		2xl:text-[120px]">¬°Pr√≥ximamente!</h1>
		<p class=" 
		tracking-tight 
		font-sans 
		m-10 
		text-[16px]-2
		sm:text-[20px]
		lg:text-[24px]
		xl:text-[28px]
		2xl:text-[32px]
		">Estamos creando para vos</p>


		<!-- Notify Button -->
		<div class="relative flex justify-center">
			<button id="notify-btn"
			class="bg-white text-black 
			px-8 
			py-3 
			text-lg font-sans rounded-full flex items-center justify-center relative 
			inset-shadow-sm inset-shadow-indigo-500
			hover:inset-shadow-sm inset-shadow-indigo-500/50
			text-base
			sm:text-[24px]
			lg:text-[28px]
			xl:text-[32px]
			2xl:text-[36px]">
				NOTIFICAR
				<span class="ml-2 relative w-6 h-6 xl:w-10">
					<img src="./public/hand.gif"
						class="absolute top-1/2 left-1/2 -translate-x-1/8 -translate-y-1/2 max-w-6xl lg:w-20" />
				</span>
			</button>
		</div>

		<!-- Brand -->
		<!-- <p class="text-sm tracking-wide mt-12">WHITE BAKANA¬Æ</p> -->

	</div>

	<script>
		const styles = `
@keyframes bubbleIn {
  0% {
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 0;
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
}

@keyframes bubbleOut {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 0;
  }
}

.form-opening {
  animation: bubbleIn 0.5s ease-out forwards;
}

.form-closing {
  animation: bubbleOut 0.5s ease-in forwards;
}

.form-hidden {
  opacity: 0;
  pointer-events: none;
}

.visible {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}`;

		// Add the styles to the document
		const styleSheet = document.createElement("style");
		styleSheet.textContent = styles;
		document.head.appendChild(styleSheet);
		const notifyBtn = document.getElementById('notify-btn')
		const emailForm = document.getElementById('emailForm')

		function toggleForm() {
			const isVisible = emailForm.classList.contains('form-opening');

			if (!isVisible) {
				emailForm.classList.remove('form-hidden');
				emailForm.classList.add('form-opening');
			} else {
				emailForm.classList.remove('form-opening');
				emailForm.classList.add('form-closing');

				setTimeout(() => {
					emailForm.classList.remove('form-closing');
					emailForm.classList.add('form-hidden');
				}, 500);
			}
		}

		const modalDangerWindow = document.getElementById("modal-danger-window")
		const toggleAlert = (isOkFromBackend) => {
			console.log("False in second round? ",modalDangerWindow.classList.contains('hidden'))
			if (modalDangerWindow.classList.contains('hidden')) {
				modalDangerWindow.classList.remove('hidden');
				modalDangerWindow.classList.add('modal-appear');
				
				modalDangerWindow.classList.remove('modal-backdrop');

				document.body.style.overflow = 'hidden';

				const modalText = document.getElementById('modal-text')
				const modalTitle = document.getElementById('modal-title')

				const modalContainer = document.getElementById('svg-modal-container')

				if (isOkFromBackend){
					modalContainer.classList.remove('bg-red-100', 'text-red-600');
					modalContainer.classList.add('bg-green-100', 'text-green-600');
					
					// Success SVG
					 modalContainer.innerHTML = `
				 <svg class="size-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
					 <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
				 </svg>`;
	
					 modalTitle.textContent = "Te hemos enviado un mail"
	
					modalText.textContent = "Gracias por formar parte de nuestra comunidad ü•π";
				} else {
					modalContainer.innerHTML = `
				 <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
										stroke="currentColor" aria-hidden="true" data-slot="icon">
										<path stroke-linecap="round" stroke-linejoin="round"
											d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
									</svg>`;
				}
			}
		}

		const removeWindow = () => {
			modalDangerWindow.classList.remove('modal-appear')
			modalDangerWindow.classList.add('modal-backdrop')
			setTimeout(() => {
				modalDangerWindow.classList.add('hidden')
			}, 2000);

		}

		notifyBtn.addEventListener('click', toggleForm);
		// closeBtn.addEventListener('click', toggleForm);

		document.getElementById('emailForm').addEventListener('submit', async function (e) {
			e.preventDefault()
			const email = document.getElementById('email').value
			toggleForm()

			const response = await fetch('https://fiscal-mommy-virtual-nautilus-a7c0219d.koyeb.app/ping', {
			    method: 'POST',
			    headers: {
			        'Content-Type': 'application/json',
			    },
			    body: JSON.stringify({ "email": email }),
			}).then(response => {
				console.log("RESPONSE: ",response)
				if (response.status == 200) {
					toggleAlert(true)
				} else {
					toggleAlert(false)
				} 
			}).catch((error) => {
				toggleAlert(false)
				console.error('Error:', error)}
			)
			// if (response.ok) {
			// 	const result = await response.text()
			//     alert(result)
			// 	toggleForm()
			// }
		})

	</script>
</body>

</html>